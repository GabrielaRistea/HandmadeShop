
<div class="products-container">
  <div class="header">
    <h2>Produse</h2>
    @if (authService.isAdmin()) {
    <a routerLink="/product-create" mat-flat-button color="primary">Adauga un produs</a>
    }
  </div>

  <div class="products-grid">
    <mat-card class="product-card" *ngFor="let product of products">
      <div class="product-clickable-area" [routerLink]="['/product-details', product.id]" style="cursor: pointer;">
        <div class="product-image-wrapper" *ngIf="product.imageSrc">
          <img [src]="product.imageSrc" alt="{{ product.name }}" class="product-image">
        </div>
      </div>

      <mat-card-content>
        <h3 class="product-name">{{ product.name }}</h3>

        <p class="product-price">
          {{ product.price }} lei
        </p>

        <p class="product-stock">Stoc: {{ product.stock }}</p>
        <p class="product-category">Categorie: {{ product.categoryName }}</p>
        <p class="product-artists">Artisti: {{ product.artistNames }}</p>
        <p class="product-artists">Descriere: {{ product.description }}</p>
      </mat-card-content>

      <mat-card-actions>
        @if (product.stock > 0) {
          <button mat-flat-button color="primary" (click)="addToCart(product.id)">
            Adauga in cos
          </button>
        } @else {
          <button mat-flat-button disabled style="background-color: #f1f1f1; color: #888;">
            Stoc insuficient
          </button>
        }
         <button mat-flat-button 
            color="warn" 
            aria-label="Add to wishlist" 
            (click)="addToWishlist(product.id)">
            <mat-icon>favorite</mat-icon>
            Favorite
         </button>
        @if (authService.isAdmin()) {
        <a [routerLink]="['/product-edit', product.id]"
           mat-stroked-button color="primary">
          Edit
        </a>

        <button mat-stroked-button color="warn" (click)="delete(product.id)">
          Sterge
        </button>
      }
      </mat-card-actions>

    </mat-card>
  </div>
</div>
