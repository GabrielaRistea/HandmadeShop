<h2>Edit Product</h2>

<form [formGroup]="form" (ngSubmit)="saveChanges()">

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Name</mat-label>
        <input matInput formControlName="Name" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="Description"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Price</mat-label>
        <input matInput type="number" min="0" formControlName="Price" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Stock</mat-label>
        <input matInput type="number" min="0" formControlName="Stock" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Category</mat-label>
        <mat-select formControlName="CategoryName">
            @for(category of categories; track category.categoryID){

            <mat-option [value]="category.categoryID">
                {{ category.name }}
            </mat-option>
            }
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Artists</mat-label>
        <mat-select formControlName="ArtistName" multiple>
            @for(artist of artists; track artist.artistID)
            {
            <mat-option [value]="artist.artistID">
                {{ artist.name }}
            </mat-option>
            }

        </mat-select>
    </mat-form-field>
    <div *ngIf="products?.productImage">
        <p>Current image:</p>
        <img 
            [src]="'data:image/png;base64,' + (products?.productImage || '')"
            class="artist-image"
        />
        </div>


      <input type="file" (change)="onFileSelected($event)">


    <div class="buttons">
        <button mat-flat-button color="primary" type="submit">Save Changes</button>
        <a mat-stroked-button routerLink="/product">Cancel</a>
      </div>
</form>